LightRelay4Camping
==================

**Фотореле для кемпинга с питанием от PowerBank**
Проект аналогового микромощного девайса управления включения-отключения USB-гирлянд (напряжением питания 5В) в ночное время суток с широким диапазоном регулировки чувствительности к темноте.

## Для чего нужно?
Если у Вас есть светодиодная гирлянда(ы) (с USB-питанием), которой хотите украсить ночью свою палатку или место кемпинга, фотореле окажется весьма полезно. Для питания таких гирлянд лучше всего подойдет PowerBank, для экономии его заряда неплохо бы включать гирлянды только ночью, а отключать утром, так чтобы днем не светились. Назначение предлагаемого фотореле – обеспечение вышеуказанной автоматизации.

> **Особенности питания PowerBank**
>
> Большинство PowerBank-ов предназначены для относительно мощных нагрузок, подключаемых
> кним; при малых нагрузках ниже 50…100мА переходят в режим «сна» (выключаются), нагрузка
> полностью обесточивается. Фотореле – устройство микротоковое и потребляет много меньше
> минимального значения тока, поэтому для решения задачи разработан и добавлен субмодуль
> дежурного питания, который заряжает собственный суперконденсатор и отключается от
> PowerBank-а. 

## Особенности девайса
Технически настоящий проект представляет несложную реализацию электронной аналоговой схемотехники и стандартной цифровой логики без применения прошивок и микроконтроллеров, что удобно в повторении и учебной практики. Для построения электронной схемы выбраны современные широкодоступные электронные компоненты.

---

## Состав устройства
Электронное устройство состоит из электронной части и корпуса.

### Электронное устройство
Электронная схема составлена из двух основных субмодулей, каждый из которых имеет нижеследующие интересные технические реализации:

* _Субмодуль фотореле_ имеет сверхнизкое энергопотребление, выполнен на широкодоступном недорогом операционном усилителе (ОУ) КМОП _LMV358_. Также имеет задержку включения-отключения для фильтрации случайных быстроменяющихся изменений освещенности фотодатчика.

* Сложный _субмодуль дежурного питания_ заряжает от PowerBank встроенный небольшой суперконденсатор и в ждущем режиме фотореле питается от него длительное время. Такое усложнение введено в виду особенностей работы PowerBank-а (подробности см. ниже). Также всегда поддерживает стабильность дежурного питания 5В благодаря наличию низкопотребляемого DC/DC преобразователя с [частотно-импульсной модуляцией (PFM)](https://ru.wikipedia.org/wiki/%D0%A7%D0%B0%D1%81%D1%82%D0%BE%D1%82%D0%BD%D0%BE-%D0%B8%D0%BC%D0%BF%D1%83%D0%BB%D1%8C%D1%81%D0%BD%D0%B0%D1%8F_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8F%D1%86%D0%B8%D1%8F).


## Исходные файлы проекта
Проект представлен нижеследующими исходными файлами

* **Файлы электронной схемы** в формате [KiCad EDA](https://www.kicad.org/) v8.0, содержащие электронную схему, печатную плату (ПП), правила трассировки печатной платы.

	```
	- root\
		├ Camping-LightRelay.kicad_*
		└ lsensor-module.kicad_sch
	```

* Электронная схема содержит дополнительные компоненты, их 3D-модели, которые выделены в отдельную библиотеку.

	```
	- root\
		├ [3dshapes]
		├ [lib.pretty]
		├ custom.kicad_sym
		├ fp-lib-table
		└ sym-lib-table
	```

* **Файлы симуляции**
Файлы симуляция [SPICE](https://ru.wikipedia.org/wiki/SPICE_(%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80_%D1%8D%D0%BB%D0%B5%D0%BA%D1%82%D1%80%D0%BE%D0%BD%D0%BD%D1%8B%D1%85_%D1%81%D1%85%D0%B5%D0%BC)) отдельных узлов содержатся в отдельной директории

	```
	- root\
		└ [Sims]
	```